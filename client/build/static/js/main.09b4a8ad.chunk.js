(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(6),i=n.n(a),s=(n(12),n(7)),l=n(5),o=n(0);var u=function(e){var t=e.playerData,n=e.index,r=Math.floor(t.duration/1e3),c="".concat(("00"+Math.floor(r/60)).slice(-2),"m:").concat(("00"+Math.floor(r%60)).slice(-2),"s");return Object(o.jsxs)("div",{className:"player-info "+(void 0!==n?n%2===0?"light":"dark":""),children:[Object(o.jsx)("div",{children:t.language}),Object(o.jsx)("div",{children:t.name}),Object(o.jsx)("div",{children:c})]})};var d=function(e){var t,n=e.matchData;if(!n.started)return Object(o.jsxs)("div",{className:"waiting-container",children:[Object(o.jsx)("h2",{children:(t=n,0!==Object.keys(t).length?"Waiting for Players":"No Match Found!!!")}),Object(o.jsxs)("p",{children:["Players:",Object(o.jsx)("span",{className:"no-player",children:n.noPlayers})]})]});var r=n.players.filter((function(e){return e.finished})).sort((function(e,t){return e.rank-t.rank})).slice(0,2);return Object(o.jsxs)("div",{className:"match-info",children:[Object(o.jsxs)("h2",{children:["Mode:",n.mode]}),0===r.length&&Object(o.jsx)("h2",{children:"Clashining.."}),r.map((function(e,t){return Object(o.jsx)(u,{playerData:e,index:t},e.name)})),Object(o.jsxs)("p",{children:["Players:",Object(o.jsx)("span",{className:"no-player",children:n.noPlayers})]})]})};n(14);var j=function(){var e=Object(r.useRef)(""),t=Object(r.useRef)(0),n=Object(r.useState)({}),c=Object(l.a)(n,2),a=c[0],i=c[1],j=Object(r.useState)(JSON.parse(window.localStorage.getItem("prevData"))||[]),h=Object(l.a)(j,2),f=h[0],b=h[1],O=Object(r.useRef)(null),m=Object(r.useCallback)((function(){""!==e.current&&(t.current>=3?console.error("Failed to get valid Data After 3 tries!"):fetch("/api/".concat(e.current)).then((function(e){return e.json()})).then((function(e){409===e.status&&(t.current++,setTimeout((function(){return m()}),200)),200===e.status&&(t.current=0,i((function(t){return t.matchId!==e.matchId&&t&&t.started&&b((function(e){if(e.some((function(e){return e.matchId===t.matchId})))return e;var n=t.players.filter((function(e){return e.finished})).sort((function(e,t){return e.rank-t.rank}))[0],r=[{matchId:t.matchId,mode:t.mode,winner:n}].concat(Object(s.a)(e));return window.localStorage.setItem("prevData",JSON.stringify(r)),r})),e})))})))}),[]);return Object(r.useEffect)((function(){return fetch("/start"),e.current=window.location.pathname.split("/").slice(-1)[0].trim(),m(),O.current=setInterval((function(){return m()}),6e3),function(){clearInterval(O.current),O.current=null}}),[m]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("center",{children:Object(o.jsx)("h2",{children:e.current||"GOTO: /web/<ChannleName>"})}),Object(o.jsxs)("div",{id:"main",children:[Object(o.jsx)(d,{matchData:a}),Object(o.jsxs)("div",{style:{marginBottom:5},children:[Object(o.jsx)("span",{style:{fontSize:"20px",fontWeight:"bolder"},children:"Winners"}),":"]}),Object(o.jsx)("div",{id:"prev-container",children:f.map((function(e){return Object(o.jsx)(u,{playerData:e.winner,matchData:e},e.matchId)}))})]})]})};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(j,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.09b4a8ad.chunk.js.map