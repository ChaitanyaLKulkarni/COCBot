(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(6),i=n.n(a),s=(n(12),n(7)),o=n(5),u=n(0);var l=function(e){var t=e.playerData,n=Math.floor(t.duration/1e3),r="".concat(("00"+Math.floor(n/60)).slice(-2),"m:").concat(("00"+Math.floor(n%60)).slice(-2),"s");return Object(u.jsxs)("div",{className:"player-info",children:[Object(u.jsx)("div",{children:t.language}),Object(u.jsx)("div",{children:t.name}),Object(u.jsx)("div",{children:r})]})};var d=function(e){var t=e.matchData;if(!t.started)return Object(u.jsxs)("div",{className:"waiting-container",children:[Object(u.jsx)("h2",{children:"Waiting for Players"}),Object(u.jsxs)("p",{children:["Current Players:",t.noPlayers]})]});var n=t.players.filter((function(e){return e.finished})).sort((function(e,t){return e.rank-t.rank})).slice(0,2);return Object(u.jsxs)("div",{className:"match-info",children:[Object(u.jsxs)("h2",{children:["Mode:",t.mode]}),Object(u.jsxs)("p",{children:["Current Players:",t.noPlayers]}),n.map((function(e){return Object(u.jsx)(l,{playerData:e},e.name)})),0===n.length&&Object(u.jsx)("h2",{children:"Clashining.."})]})};n(14);var j=function(){var e=Object(r.useRef)(window.location.pathname.split("/").slice(-1)[0]),t=Object(r.useState)({}),n=Object(o.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(JSON.parse(window.localStorage.getItem("prevData"))||[]),j=Object(o.a)(i,2),h=j[0],f=j[1],O=Object(r.useRef)(null),b=function(){e.current&&fetch("/api/".concat(e.current)).then((function(e){return e.json()})).then((function(e){200===e.status&&a((function(t){return t.matchId!==e.matchId&&t&&t.started&&f((function(e){if(e.some((function(e){return e.matchId===t.matchId})))return e;var n=t.players.filter((function(e){return e.finished})).sort((function(e,t){return e.rank-t.rank}))[0],r=[{matchId:t.matchId,mode:t.mode,winner:n}].concat(Object(s.a)(e));return window.localStorage.setItem("prevData",JSON.stringify(r)),r})),e}))}))};return Object(r.useEffect)((function(){return b(),O.current=setInterval((function(){return b()}),5e3),fetch("/start"),function(){clearInterval(O.current),O.current=null}}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:e.current||"GOTO : /web/<ChannleName>"}),e.current&&Object(u.jsxs)("div",{id:"main",children:[Object(u.jsx)(d,{matchData:c}),Object(u.jsxs)("div",{id:"prev-container",children:["Previous Winners:",h.map((function(e){return Object(u.jsx)(l,{playerData:e.winner,matchData:e},e.matchId)}))]})]})]})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(j,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b970bbe2.chunk.js.map